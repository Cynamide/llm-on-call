<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Ultravox Call Interface</title>
    <!-- Bootstrap CSS for aesthetic and responsive design -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <style>
      body {
        background: #f5f7fa;
        font-family: Arial, sans-serif;
      }
      .container {
        max-width: 600px;
        margin-top: 50px;
        background: #fff;
        padding: 30px;
        border-radius: 8px;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      }
      .form-label {
        font-weight: 600;
      }
      .btn-call {
        background-color: #007bff;
        border: none;
      }
      .btn-call:hover {
        background-color: #0056b3;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h2 class="mb-4 text-center">Ultravox Call Interface</h2>
      <form id="callForm" method="POST" action="/start-call">
        <div class="mb-3">
          <label for="twilioAccountSid" class="form-label"
            >Twilio Account SID</label
          >
          <input
            type="text"
            class="form-control"
            id="twilioAccountSid"
            name="twilioAccountSid"
            placeholder="Enter Twilio Account SID"
            required
          />
        </div>
        <div class="mb-3">
          <label for="twilioAuthToken" class="form-label"
            >Twilio Auth Token</label
          >
          <input
            type="text"
            class="form-control"
            id="twilioAuthToken"
            name="twilioAuthToken"
            placeholder="Enter Twilio Auth Token"
            required
          />
        </div>
        <div class="mb-3">
          <label for="twilioPhoneNumber" class="form-label"
            >Twilio Phone Number</label
          >
          <input
            type="text"
            class="form-control"
            id="twilioPhoneNumber"
            name="twilioPhoneNumber"
            placeholder="Enter Twilio Phone Number"
            required
          />
        </div>
        <div class="mb-3">
          <label for="ultravoxApiKey" class="form-label"
            >Ultravox API Key</label
          >
          <input
            type="text"
            class="form-control"
            id="ultravoxApiKey"
            name="ultravoxApiKey"
            placeholder="Enter Ultravox API Key"
            required
          />
        </div>
        <div class="mb-3">
          <label for="name" class="form-label">Name</label>
          <input
            type="text"
            class="form-control"
            id="name"
            name="name"
            placeholder="Enter Your Name"
            required
          />
        </div>
        <div class="mb-3">
          <label for="systemPrompt" class="form-label">System Prompt</label>
          <textarea
            class="form-control"
            id="systemPrompt"
            name="systemPrompt"
            rows="6"
            required
          >
You are a customer service representative from Lemur PBC, tasked with collecting the user's date of birth (DOB) to update their health profile. Use a professional, courteous tone and keep responses concise, adapting to user input while staying on topic.
Greet and Confirm Identity
Greet the user, state you’re from Lemur PBC, and explain the call is to update their health profile with their DOB, lasting about 1 minute. Ask, "Am I speaking with [userName]?"  
If yes, proceed to request DOB.  

If no, say the call is for [userName], ask to speak to them. If unavailable, call getDob("User cannot be authenticated") and end with hangUp.

Request DOB
Politely ask, "Please share your date of birth."

Confirm DOB
Repeat the DOB as "month day, year" (e.g., "March 10, 1990") and ask, "Is that correct?"  
If confirmed, thank them and submit via getDob.  

If incorrect, ask again and repeat confirmation.

Manage Time
At 1 minute, say, "Thank you, but we’ve reached the time limit," and end with hangUp.

Handle Off-Topic
Redirect politely (e.g., "I’m here for your DOB—can we focus on that?") and end call if needed.




        </textarea
          >
        </div>
        <div class="mb-3">
          <label for="targetPhoneNumber" class="form-label"
            >Phone Number to Call</label
          >
          <input
            type="tel"
            class="form-control"
            id="targetPhoneNumber"
            name="targetPhoneNumber"
            placeholder="+1234567890"
            required
          />
        </div>
        <div class="d-grid">
          <button type="submit" class="btn btn-call btn-lg">Call</button>
        </div>
      </form>
    </div>

    <!-- Bootstrap Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Optional: Additional JavaScript can be added here to handle form submission via AJAX if needed -->
  </body>
</html>
